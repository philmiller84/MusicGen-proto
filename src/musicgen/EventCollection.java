package musicgen;
//
//  Generated by StarUML(tm) Java Add-In
//
//  @ Project : MusicGen
//  @ File Name : EventCollection.java
//  @ Date : 6/24/2014
//  @ Author : Phil
//
//

public class EventCollection  {
    
    private StorageInterface storage;
    private StorageType storageType;
    private EventLine eventLineReference; //reference
    
    Event firstEvent;
    Event lastEvent;
    
    public EventCollection(StorageType storageType) {
        this.storageType = storageType;
        switch (this.storageType)
        {
            case ARRAYLIST:
                storage = new ArrayListStorage(this);
                break;
            case TREESET:
                storage = new TreeSetStorage(this);
                break;
        }
    }
          
    public void SetEventLine(EventLine eventLine){

        this.eventLineReference = eventLine;
    }
    
    public EventLine GetEventLine(){

        return eventLineReference;
    }
    
    public void InsertRelative(Event insertEvent, Event relativeEvent, 
            PositionType positionType) {
        
        storage.InsertRelative(insertEvent, relativeEvent, positionType);
        UpdateFirstLast();
    }
    
    public void InsertIrrelative(Event insertEvent, PositionType positionType) {
        
        storage.InsertIrrelative(insertEvent, positionType);
        UpdateFirstLast();
    }
    
    public void Delete(Event e) {
        storage.Delete(e);
        UpdateFirstLast();
    }
	
    public Event GetNext(Event e) {
        
        return storage.GetNext(e);	
    }
	
    public Event GetPrevious(Event e) {
        
        return storage.GetPrevious(e);		
    }
    
    public Event GetFirst() {
        
        return firstEvent;
    }
    
    public Event GetLast() {
        
        return lastEvent;
    }
    public void ChangeStorageType(){
            
    }
    
    private void UpdateFirstLast(){
        
        this.firstEvent = storage.GetFirst();
        this.lastEvent = storage.GetLast();
    }
}
